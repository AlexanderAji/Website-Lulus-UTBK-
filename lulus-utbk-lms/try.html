<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>DASHMIN - Bootstrap Admin Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/5.5.0/css/bootstrap.min.css">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

</head>
<body>
    <!-- code posting deskripsi -->
    <div class="container mt-5">
        <h1>Deskripsi Post</h1>
        <form id="description-form">
            <div class="mb-3">
                <label for="description" class="form-label">Deskripsi:</label>
                <textarea class="form-control" id="description" rows="5" placeholder="Tulis deskripsi disini..." required></textarea>
            </div>
            <button type="button" class="btn btn-primary" onclick="postDescription()">Post Deskripsi</button>
        </form>
        <div id="description-container" class="mt-4">
            <!-- Deskripsi akan ditampilkan di sini -->
        </div>
    </div>
    <!-- code posting deskripsi -->

    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
        Launch demo modal
    </button>
  
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- tempat taruh code comment -->
                    <div class="container mt-5">
                        <h1>Forum Diskusi</h1>
                        <div id="comments-container">
                            <!-- Komentar-komentar akan ditampilkan di sini -->
                        </div>
                        <form id="comment-form">
                            <div class="mb-3">
                                <label for="comment" class="form-label">Komentar:</label>
                                <textarea class="form-control" id="comment" rows="3" required></textarea>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="addComment()">Tambah Komentar</button>
                        </form>
                    </div>
                    <!-- tempat taruh code comment -->
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
</body>

<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="lib/chart/chart.min.js"></script>
<script src="lib/easing/easing.min.js"></script>
<script src="lib/waypoints/waypoints.min.js"></script>
<script src="lib/owlcarousel/owl.carousel.min.js"></script>
<script src="lib/tempusdominus/js/moment.min.js"></script>
<script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
<script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.5.0/js/bootstrap.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Template Javascript -->
<script src="js/main.js"></script>
    <script>
        // Data dummy untuk deskripsi
        let posts = [];

        // Data dummy untuk komentar
        let comments = {};

        // Fungsi untuk memposting deskripsi
        function postDescription() {
            const descriptionText = document.getElementById('description').value;

            if (descriptionText) {
                const post = {
                    id: Date.now().toString(), // ID unik untuk setiap postingan
                    username: 'Alex',
                    descriptionText: descriptionText,
                    date: new Date(),
                    avatar: 'img/user.jpg', 
                    button: ''
                };

                posts.push(post);
                displayDescription(post);
                clearForm();
            } else {
                alert('Harap isi kolom deskripsi!');
            }
        }

        // Fungsi untuk menampilkan deskripsi
        function displayDescription(post) {
            const descriptionContainer = document.getElementById('description-container');

            const descriptionDiv = document.createElement('div');
            descriptionDiv.id = post.id;
            descriptionDiv.classList.add('mb-3', 'p-3', 'border', 'border-secondary', 'rounded');

            const userHeader = document.createElement('div');
            userHeader.classList.add('d-flex', 'justify-content-between', 'align-items-center');

            const userInfo = document.createElement('div');
            userInfo.classList.add('d-flex', 'align-items-center');

            const avatarImg = document.createElement('img');
            avatarImg.src = post.avatar;
            avatarImg.alt = 'Avatar';
            avatarImg.classList.add('avatar-img');

            const usernameElement = document.createElement('h5');
            usernameElement.textContent = post.username;

            const dateElement = document.createElement('p');
            dateElement.textContent = formatDate(post.date);

            const descriptionTextElement = document.createElement('p');
            descriptionTextElement.className = 'style justify-content-center';
            descriptionTextElement.textContent = post.descriptionText;

            const buttonComment = document.createElement('button');
            buttonComment.className = 'btn btn-primary d-flex align-items-center p-2 mt-3 mb-0';
            buttonComment.setAttribute('role', 'button');
            buttonComment.innerText = 'Komentar';
            buttonComment.setAttribute('data-bs-toggle', 'modal');
            buttonComment.setAttribute("href", "#exampleModal");
            buttonComment.setAttribute('onclick', `myFunction('${post.id}')`);

            const breakComment = document.createElement('hr');
            breakComment.textContent = post.break;

            descriptionTextElement.appendChild(breakComment);
            descriptionTextElement.appendChild(buttonComment);

            userInfo.appendChild(avatarImg);
            userInfo.appendChild(usernameElement);

            userHeader.appendChild(userInfo);
            userHeader.appendChild(dateElement);

            descriptionDiv.appendChild(userHeader);
            descriptionDiv.appendChild(descriptionTextElement);

            descriptionContainer.appendChild(descriptionDiv);
        }

        // Fungsi untuk membersihkan formulir setelah memposting deskripsi
        function clearForm() {
            document.getElementById('description').value = '';
        }

        // Fungsi untuk memformat tanggal
        function formatDate(date) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Intl.DateTimeFormat('en-US', options).format(date);
        }

        // Fungsi untuk menambahkan komentar
        function addComment() {
            const commentText = document.getElementById('comment').value;

            if (commentText) {
                const postId = document.getElementById('exampleModal').getAttribute('data-post-id');
                const comment = {
                    username: 'ALEX',
                    commentText: commentText,
                    date: new Date(),
                    avatar: 'img/user.jpg' 
                };

                if (!comments[postId]) {
                    comments[postId] = [];
                }
                comments[postId].push(comment);

                displayComments(postId);
                clearForm();
            } else {
                alert('Harap isi kolom komentar!');
            }
        }

        // Fungsi untuk menampilkan komentar
        function displayComments(postId) {
            const commentsContainer = document.getElementById('comments-container');
            commentsContainer.innerHTML = '';

            if (comments[postId]) {
                comments[postId].forEach(comment => {
                    const commentDiv = document.createElement('div');
                    commentDiv.classList.add('mb-3', 'p-3', 'border', 'border-secondary', 'rounded');

                    const userHeader = document.createElement('div');
                    userHeader.classList.add('d-flex', 'justify-content-between', 'align-items-center');

                    const userInfo = document.createElement('div');
                    userInfo.classList.add('d-flex', 'align-items-center');

                    const avatarImg = document.createElement('img');
                    avatarImg.src = comment.avatar;
                    avatarImg.alt = 'Avatar';
                    avatarImg.classList.add('avatar-img');

                    const usernameElement = document.createElement('h5');
                    usernameElement.textContent = comment.username;

                    const dateElement = document.createElement('p');
                    dateElement.textContent = formatDate(comment.date);

                    const commentTextElement = document.createElement('p');
                    commentTextElement.textContent = comment.commentText;

                    userInfo.appendChild(avatarImg);
                    userInfo.appendChild(usernameElement);

                    userHeader.appendChild(userInfo);
                    userHeader.appendChild(dateElement);

                    commentDiv.appendChild(userHeader);
                    commentDiv.appendChild(commentTextElement);

                    commentsContainer.appendChild(commentDiv);
                });
            }
        }

        // Fungsi untuk menyimpan data postingan saat tombol "Tambah Komentar" diklik
        function myFunction(postId) {
            document.getElementById('exampleModal').setAttribute('data-post-id', postId);
            displayComments(postId);
        }

        // Memanggil displayComments saat halaman dimuat
        document.addEventListener('DOMContentLoaded', function () {
            // Gunakan posts untuk menampilkan deskripsi saat halaman dimuat
            posts.forEach(post => displayDescription(post));
        });
    </script>




</html>